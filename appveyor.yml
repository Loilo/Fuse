build: false

environment:
  # Use this matrix as an example
  matrix:

    # Specify matrix item for your app
    - PHP_VERSION: 7.3
      VC_VERSION: 15
      BUILD_TYPE: nts-Win32
      APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2015

  # Specify required PHP SDK binary tools if you need SDK
  PHP_SDK_VERSION: 2.1.9

  PHP_AVM: https://raw.githubusercontent.com/sergeyklay/php-appveyor/master/php-appveyor.psm1

cache:
  - 'C:\Downloads -> .appveyor.yml'

platform:
  - x64

install:
  # Download php-appveyor.psm1 module and invoke it to the current session
  - ps: (new-object Net.WebClient).DownloadString($Env:PHP_AVM) | iex
  - ps: InstallPhp        $Env:PHP_VERSION $Env:BUILD_TYPE $Env:VC_VERSION $Env:PLATFORM
  - ps: InstallComposer
  - ps: >-
      EnablePhpExtension `
        -Name       openssl 
  - ps: $env:Path += ";C:\php"

before_test:
  - composer update --no-progress --profile -n
  - composer show

test_script:
  - vendor/bin/phpunit test